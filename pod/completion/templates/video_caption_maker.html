{% extends 'base.html' %}
{% load i18n %}
{% load staticfiles %}

{% block page_extra_head %}
	<link rel="stylesheet" href="{% static 'css/caption_maker.css' %}"/>
{% include 'videos/video-header.html' %}
{% endblock page_extra_head %}


{% block breadcrumbs %}
    {{block.super}}
    <li class="breadcrumb-item"><a href="{% url 'my_videos' %}" title="{% trans 'My videos' %}">{% trans 'My videos' %}</a></li>
    
    <li class="breadcrumb-item">
        <a href="{% url 'video' slug=video.slug %}" title="{{video.title}}">
            {{video.title|title|truncatechars:45}}
        </a>
    </li>
    <li class="breadcrumb-item active"  aria-current="page">
        {% trans 'Video Caption Maker' %}
    </li>
{% endblock %}

{% block page_title %}
{% trans "Video Caption Maker" %}
{% endblock %}


{% block page_content %}
<h3>{% trans "Video Caption Maker" %}</h3>

<!-- extract from https://webcache.googleusercontent.com/search?q=cache:-ebduGPpZGYJ:https://testdrive-archive.azurewebsites.net/Graphics/CaptionMaker/Default.html+&cd=1&hl=fr&ct=clnk&gl=fr -->
<form class="form_insert completion" id="form_insert_track" action="{% url 'video_caption_maker' slug=video.slug %}" method="POST">
    {% csrf_token %}
    <input type="hidden" name="action" value="new">
    <p class="text-info">{% trans "Load Existing Caption File [optional]" %} : 
	<input type="submit" value="{% trans 'Add a file' %}" class="btn btn-info"/>
</form>

<div class="grayNoVideo">
    <div style="display: inline-block; float: left; margin-right: 2%; min-height: 425px;
            width: 49%;">
        <span>{% trans "Video" %}:</span>
        {% include 'videos/video-element.html' %}
        <div id="videoError" class="videoError" style="display: none;"></div>
        <div id="captionTitle"></div>
        <div>
        <textarea id="textCaptionEntry" class="" autocomplete="off"></textarea>
        </div>
        <div >
            <button id="playButton" class="btn btn-primary btn-sm">{% trans "Play" %}</button>
            <button id="pauseButton" class="btn btn-primary btn-sm">{% trans "Pause" %}</button>
            <button id="justSaveCaption" class="btn btn-primary btn-sm">{% trans "Save" %}</button>
            <button id="saveCaptionAndPlay" class="btn btn-primary btn-sm">{% trans "Save &amp; Continue" %}</button>
        </div>
    </div>
    <div style="display: inline-block; float: left; width: 49%;">
        <span>{% trans "Caption list" %}:</span>
        <div id="display">
            
        </div>
        <div >
            <button id="clearAllCaptions" class="btn btn-primary btn-sm mt-1">{% trans "Clear All" %}</button>
        </div>
    </div>
    <div id="captionFileAndMarkup" style="clear: both; padding-top: 24px; padding-bottom: 24px; display: block;">
    {% comment %}
    <div style="padding-bottom: 4px;"> 
        {% trans "Select and copy the caption file contents below and paste into a .vtt file" %}:
    </div>
    <div>
        <textarea id="captionFile" style="width: 100%;" rows="12" readonly="readonly" autocomplete="off"></textarea>
    </div> %}
    {% endcomment %}
    <div style="padding-top: 6px;">
        {% comment %}
        <button id="blobBuilderSave" style="margin-right: 2em; display: none;">Save to File</button>
        <button id="copyToClipboard" class="btn btn-primary btn-sm"><i data-feather="copy"></i>{% trans "Copy to Clipboard" %}</button>
        {% endcomment %}
        <form class="form_save completion" id="form_save_track" action="{% url 'video_caption_maker' slug=video.slug %}" method="POST">
            {% csrf_token %}
            <input type="hidden" name="action" value="save">
            <p class="text-info">{% trans "Save" %} : 
            <input type="submit" value="{% trans 'Save Captions' %}" class="btn btn-info"/>
        </form>
        <span class="float-right">
            <a href="{% url 'video_completion' slug=video.slug %}" title="{% trans 'View the video' %}" class="btn btn btn-outline-dark btn-sm">
                <i data-feather="arrow-left"></i>&nbsp;{% trans "Back to the completion"%}
            </a>
        </span>
    </div>            
    </div>
</div>

{% endblock page_content %}

{% block collapse_page_aside %}
{% endblock collapse_page_aside %}

{% block page_aside %}
{% endblock page_aside %}

{% block more_script %}
    <script src="{% static 'js/caption_maker.js' %}"></script>
    <script src="{% static 'js/completion.js' %}"></script>
{% include 'videos/video-script.html'%}
{% endblock more_script %}