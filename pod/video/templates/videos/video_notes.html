{% load i18n %}
{% load staticfiles %}

{% if messages %}
<div id="base-message-alert">
{% for message in messages %}
<div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
  {{ message }}
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
{% endfor %}
</div>
<script>
$(document).ready(function () {
    TriggerAlertClose();
});
</script>
{% endif %}
<!---->
<div id="id_notes">
    {% for note in listNotes %}
    <div id="note-{{ note.id }}">
        <span class="timestamp" start="{{ note.timestamp }}">{{ note.timestampstr }}</span>
        <span class="note">{{note.notestr}}</span>
        <button class="remove" type="button" action="remove">X</button>
    </div>
    {% endfor %}
</div>
<!---->
<form method="post" action="{% url 'video_notes' slug=video.slug %}" id="video_notes_form">
{% csrf_token %}
<fieldset>
    {% if notesForm.errors %}
    <p class="text-danger">{% trans "One or more errors have been found in the form." %}</p>
    {% endif %}
    {% for field_hidden in notesForm.hidden_fields %}
        {{field_hidden}}
    {% endfor %}
    {% for field in notesForm.visible_fields %}
        {% spaceless %}
        <div class="form-group" >
            {{ field.errors }}
            {{ field }}
            {% if field.help_text %}
            <small id="{{field.id_for_label}}Help" class="form-text text-muted">{{ field.help_text|safe }}</small>
            {% endif %}
            {% if field.field.required %}<div class="invalid-feedback">{% trans "Please provide a valid value for this field" %}.</div>{%endif%}
        </div>
        {% endspaceless %}
    {% endfor %}
    <!--
    {% if notesForm.instance.id %}
        <input type="hidden" id="note_id" name="note_id" value="{{notesForm.instance.id}}"/>
    {% endif %}
    -->
    <div class="text-center mt-1">
        <textarea class="input_note" autocomplete="off" action="save_new"></textarea>
    </div>
</fieldset>
</form>
